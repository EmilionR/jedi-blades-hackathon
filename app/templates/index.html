{% extends 'base.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'css/index.css' %}" />

<!-- Content Block -->
<section class="outer-hero-section starry-sky">
  <div class="jedi-hero-section">
    <div class="jedi-hero-text">
      <!-- Content for scrolling effect -->
      <div>
        <h1>Welcome to Jedi Blades</h1>
        <p>
          Jedi Blades is a store that sells lightsabers. We have a wide
          selection of lightsabers for you to choose from. Whether you are a
          Jedi or a Sith, we have the perfect lightsaber for you.
        </p>
        <p>
          Our lightsabers are made from the finest materials and are built to
          last. They are perfect for dueling or for display. We also have
          lightsaber accessories such as stands and cases to help you take care
          of your lightsaber.
        </p>
        <p>
          So come on in and take a look at our selection. May the Force be with
          you!
        </p>
      </div>
    </div>
    <div class="jedi-hero-overlay"></div>
  </div>
</section>
<section class="select-your-side w-100">
  <div class="mx-auto d-flex justify-content-center  " style="z-index:80 !important;">
    <!-- Star Wars Theme Title -->
    <div class="toggle-section pt-4 my-3 ">
    <div class="text-center mb-3">
        <h1 class="star-wars-title">Choose Your Path</h1>
    </div>
    <!-- Toggle for Jedi, Balance, and Sith -->
    <div class="btn-group toggle-buttons" role="group" aria-label="Side Toggle">
        <button type="button" class="btn toggle-btn" id="lightSide">Jedi</button>
        <button type="button" class="btn toggle-btn" id="bothSides">Balance</button>
        <button type="button" class="btn toggle-btn" id="darkSide">Sith</button>
    </div>
</div>
</div>
<div class=" my-3 row d-flex  justify-content-center align-items-center">
<!-- Content for selected side -->
<div id="sideContent  " class="row d-flex justify-content-center align-items-center" >
  <div class=" col-10 col-md-8 d-flex justify-content-center text-center ">
    <img id="sideLogo" src="" alt="Side Logo" style="display: none;">
  </div>
  <div class=" col-10 col-md-8 d-flex justify-content-center text-center ">
    <p id="sideText" class="mt-3" style="display: none;"></p>
  </div>
</div>
</div>
</div>

  <div class="row justify-content-center mt-3 ">
    {% for lightsaber in lightsabers %}
    <!-- Make sure to convert 'L' to 'light' and 'D' to 'dark' for class name compatibility -->

    <article
      class="col-10 col-md-5 col-lg-4 mb-4 jedi-card-custom lightsaber-row   {{ lightsaber.owner.alignment }}"  data-color="{{ lightsaber.color }}" 
    >
      <div class="card lightsaber-card  "  style="border-color: {{ lightsaber.color }};">
        <div class="card-body row">
          <div class="col">
            <h5 class="card-title">{{ lightsaber.name }}</h5>
            <p class="card-text">
              Color:
              <span class="color-text" title="{{ lightsaber.color }}"></span>
            </p>
            <p class="card-text">Owner: {{ lightsaber.owner }}</p>
          </div>
          <div class="col p-2 pb-4 saber-container">
            <div class="lightsaber">
              <div
                class="glow"
                style="background-color: {{ lightsaber.color }};"
              ></div>
              <div class="core"></div>
              <div class="handle"></div>
            </div>
          </div>
          <div class="row g-0 justify-content-around px-2">
            <div class="col-10">
              <a
                href="{% url 'lightsaber-detail' pk=lightsaber.id %}"
                class="btn btn-primary w-100" style="border-color: {{ lightsaber.color }};"
              >
                Details
              </a>
            </div>
            <div class="col-10 py-2">
              <!-- Trigger for Character Modal -->
              <button
                type="button"
                class="btn btn-primary w-100" style="border-color: {{ lightsaber.color }};"
                data-bs-toggle="modal"
                data-bs-target="#characterModal{{ lightsaber.id }}"
              >
                {{ lightsaber.owner }}
              </button>
            </div>
          </div>
        </div>
      </div>
      <div
        class="modal fade"
        id="characterModal{{ lightsaber.id }}"
        tabindex="-1"
        aria-labelledby="characterModalLabel{{ lightsaber.id }}"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5
                class="modal-title"
                id="characterModalLabel{{ lightsaber.id }}"
              >
                {{ lightsaber.owner.name }}
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <p>Full Name: {{ lightsaber.owner.full_name }}</p>
              <p>Alignment: {{ lightsaber.owner.get_alignment_display }}</p>
              <p>Home Planet: {{ lightsaber.owner.home_planet }}</p>
            </div>
          </div>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>
</section>
<script>
document.getElementById("lightSide").addEventListener("click", function () {
    updateContent("path/to/jedi-logo.png", "The Force is strong with you. As a Jedi, you seek peace and justice in the galaxy. Your lightsaber is a symbol of hope, illuminating the path to a brighter future. May the Force be with you, always.", "light-mode");
});

document.getElementById("bothSides").addEventListener("click", function () {
    updateContent("path/to/balance-logo.png", "Balance is key. You walk the fine line between light and dark, harnessing the powers of both sides of the Force. Your journey is one of equilibrium, seeking harmony in a galaxy divided by conflict.", "blend-mode");
});

document.getElementById("darkSide").addEventListener("click", function () {
    updateContent("path/to/sith-logo.png", "Power is everything. As a Sith, you embrace the darkness, seeking to dominate the galaxy with your unmatched strength. Your red lightsaber burns with the fire of your ambition, casting fear into the hearts of your enemies.", "dark-mode");
});

function updateContent(imgSrc, text, modeClass) {
    const sideLogo = document.getElementById("sideLogo");
    const sideText = document.getElementById("sideText");
    const selectSide = document.querySelector(".select-your-side");

    sideLogo.src = imgSrc;
    sideLogo.style.display = "block";
    sideText.innerHTML = text;
    sideText.style.display = "block";
    selectSide.className = "select-your-side " + modeClass;
}
 
     // Set blend mode as default
     document.querySelector(".select-your-side").className = "select-your-side blend-mode";
 
     document.getElementById("lightSide").addEventListener("click", function () {
         document.querySelector(".select-your-side").className = "select-your-side light-mode";
     });
     document.getElementById("bothSides").addEventListener("click", function () {
         document.querySelector(".select-your-side").className = "select-your-side blend-mode";
     });
     document.getElementById("darkSide").addEventListener("click", function () {
         document.querySelector(".select-your-side").className = "select-your-side dark-mode";
     });
 
   document.getElementById("lightSide").addEventListener("click", function () {
     filterSide("L");
   });
   document.getElementById("bothSides").addEventListener("click", function () {
     filterSide("both");
   });
   document.getElementById("darkSide").addEventListener("click", function () {
     filterSide("D");
   });
 
   function filterSide(side) {
     const cards = document.querySelectorAll(".jedi-card-custom");
     cards.forEach((card) => {
       console.log(card.classList);
       if (side === "both") {
         card.style.display = "";
       } else {
         card.style.display = card.classList.contains(side) ? "block" : "none";
       }
     });
   }
 
   // Set the background color of the color text elements
   document.addEventListener("DOMContentLoaded", function () {
     const colorTextElements = document.querySelectorAll(".color-text");
 
     colorTextElements.forEach((element) => {
       const colorValue = element.getAttribute("title").trim().toLowerCase();
 
       if (["red", "blue", "green", "yellow", "purple"].includes(colorValue)) {
         element.style.backgroundColor = colorValue;
       } else {
         element.style.backgroundColor = "transparent";
       }
     });
   });

  // Set the background color of the color text elements
  document.addEventListener("DOMContentLoaded", function () {
    const colorTextElements = document.querySelectorAll(".color-text");

    colorTextElements.forEach((element) => {
      const colorValue = element.getAttribute("title").trim().toLowerCase();

      if (["red", "blue", "green", "yellow", "purple"].includes(colorValue)) {
        element.style.backgroundColor = colorValue;
      } else {
        element.style.backgroundColor = "transparent";
      }
    });
  });

// Starry Sky Animation for Hero Section
document.addEventListener("DOMContentLoaded", function () {
    const starrySky = document.querySelector(".starry-sky");
    const starsCount = 300;

    for (let i = 0; i < starsCount; i++) {
      let star = document.createElement("div");
      star.className = "star";
      star.style.left = Math.random() * 100 + "vw";
      star.style.top = Math.random() * 50 + "vh";

      // Increase the minimum and maximum duration for slower animation
      let duration = Math.random() * (250 - 5) + 5;
      star.style.animationDuration = duration + "s";

      starrySky.appendChild(star);
    }

  }); 


</script>

{% endblock %}
